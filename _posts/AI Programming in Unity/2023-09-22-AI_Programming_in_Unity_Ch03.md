---
title:  "[유니티 게임 AI 프로그래밍] 003. 센서 구현"
excerpt: "센서를 구현해봅시다!"

author: gunnHB
categories: 
 - AI Programming
tags: 
 - [Github, Git, Unity, Programming, AI Programming, C#]

toc: true
toc_sticky: true
 
date: 2023-09-22
last_modified_at: 2023-09-22
---

🔔 유니티 게임 AI 프로그래밍 2/e 서적을 정리한 내용입니다. 🔔
{: .notice}

<div class="notice--info" markdown="1">
3장에서는 살아있는 생명체와 유사한 감각 시스템 개념을 사용해 인공지능 행동을 구현해볼 예정입니다.

NPC의 인공지능 수준은 전적으로 환경으로부터 얻는 정보의 종류와 양에 의해 결정됩니다.
인공지능 캐릭터는 이런 정보를 토대로 어떤 로직을 실행할지 결정하는데,
만일 정보가 충분하지 않으면 캐릭터는 이상한 행동을 하게 될 것입니다.

모든 환경 매개변수를 검사하고 그에 대응하도록 만들 수도 있지만 좀 더 효율적인 디자인 패턴을 사용하면
코드의 유지보수와 확장이 쉬워집니다.

3장에서는 센서 시스템을 만들 때 유용하게 사용할 수 있는 디자인 패턴을 소개할 예정입니다.

- 센서 시스템의 의미
- 다양한 센서 시스템 소개
- 센서를 사용해 탱크 예제 설정하기
</div>

## 기본 센서 시스템
인공지능 센서 시스템은 시각이나 청각 후각 등을 흉내내는 형태로 사물을 인지합니다.
센서 시스템에서 에이전트는 자신이 관심을 두는 감각에 대해 주기적인 환경 검사를 수행합니다.

기본 센서 시스템 개념에는 2개의 컴포넌트가 존재합니다.

- Aspect
- Sense

우리의 인공지능 캐릭터는 지각이나 후각, 촉각 같은 감각기관을 통해 적을 감지할 것입니다.
기본적으로 구현하려는 베이스 인터페이스 `Sense`로 다른 커스텀 센스가 상속받아서 구현하게 됩니다.

만일 인공지능 캐릭터가 적을 발견하면 알림을 받아 어떤 행동을 처리하면 됩니다.

가장 먼저 최소한의 형태를 가지는 `Aspect` 클래스를 만들어봅시다.

## 콘 형태의 시야
2장에서 적의 시야에 플레이어가 있는지 감지하는 기능을 구현하기 위해 유니티의 
`레이캐스트` 방식을 사용했습니다. 이는 매우 간단하고 효율적인 모델이지만 시야를 처리하는데
그리 정확하진 않습니다.

이를 보완하기 위해 콘`Corn` 모양의 시야를 사용하는데, 이 방식은 2D, 3D 모두에서 사용 가능합니다.

![Ch003_001](https://github.com/GunnHB/gunnHB.github.io/assets/117302300/21816567-8a2c-4b99-bfb4-0b7a8d975e79){: .align-center}{: width="70%" height="70%"}

위 그림처럼 에이전트의 눈으로부터 콘이 시작되어 커지며 거리가 멀어질수록 정확도는 낮아집니다.

💡색상의 농도는 거리에 따라 정확도가 낮아지는 모습입니다.
{: .notice--info}

간단한 모델에서는 거리가 주변을 곻려하지 않고 단지 겹치는지만 확인하면 됩니다. 좀 더 복잡한 구현에서는
콘이 원점으로부터 멀어짐에 따라 볼 수 있는 영역도 늘어나지만 콘의 가장자리로 갈수록 중앙부에 비해
볼 수 있는 가능성은 줄어듭니다.

## 구를 사용해서 듣기, 느끼기, 냄새 맡기
구를 활용하면 매우 간단하면서도 효과적인 소리와 촉각, 냄새를 모델링할 수 있습니다.

소리를 예로 들면 중앙 부분을 소리의 근원지로 생각할 수 있고 청자가 중심으로부터 멀어질수록 소리의 크기는 줄어듭니다.

![image](https://github.com/GunnHB/gunnHB.github.io/assets/117302300/da7afb15-e97a-45ba-ae76-73726a2626ff){: .align-center}{: width="70%" height="70%"}

시야를 어떻게 설정하느냐에 따라서 거리에 따른 인지 확률이 달라집니다. 물론 단순하게 겹치는지만 검사하는
형태를 취하면 거리에 무관하게 모두 인지됩니다.

## 전지적 능력을 활용한 인공지능 확장
사실 전지적인 능력을 잘 활용하면 인공지능을 크게 향상시킬 수 있습니다. 이는 에이전트가 모든 걸 알아야 한다는 건 아니며
필요에 따라 모든 걸 알아낼 수 있다는 것을 의미합니다. 물론 이는 현실적이지 않지만 때론 최고의 해법이 될 수 있습니다.

게임에서는 추상적인 개념을 구체적인 값으로 모델링하는 경향이 있습니다. 
예를 들어 체력을 0부터 100 사이의 숫자로 표현합니다. 이런 정보에 직접 접근할 수 있는 것이 현실적으로 보이진 않지만
좀 더 실용적인 의사결정을 내리는 데는 큰 도움이 됩니다. 이런 부분에 대해서는 에이전트가 게임 내 설정상 전지적인
능력을 갖추고 있다고 이해해도 큰 무리는 없습니다.

