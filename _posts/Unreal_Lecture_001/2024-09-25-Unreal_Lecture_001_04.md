---
title:  "[Unreal Lecture 001] Section001::í”Œë ˆì´ì–´ ì—°ê²°í•˜ê¸° 003"
excerpt: ""

author: gunnHB
categories: 
 - UnrealLecture
tags: 
 - [Github, Git, Unreal, Programming, UnrealLecture, C++]

toc: true
toc_sticky: true
 
date: 2024-09-25
last_modified_at: 2024-09-25
---

ğŸ”” ìœ ë°ë¯¸ [ì–¸ë¦¬ì–¼ C++ ë©€í‹°í”Œë ˆì´ì–´ ë§ˆìŠ¤í„° : ì¤‘ê¸‰ ê²Œì„ ê°œë°œ](https://www.udemy.com/course/best-unreal-c/?couponCode=ST22MT92324B)ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ğŸ””
{: .notice}

## GameInstance
`GameInstance`ëŠ” ì¼ì¢…ì˜ ì‹±ê¸€í†¤ìœ¼ë¡œ ê²Œì„ì˜ ì „ë°˜ì ì¸ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ê²Œì„ì´ ì‹œì‘ë˜ë©´ ìƒì„±ë˜ê³ , ê²Œì„ì´ ì¢…ë£Œë˜ë©´ íŒŒê´´ë©ë‹ˆë‹¤.
ì´ëŠ” ê²Œì„ì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì¢…ë£Œë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë ˆë²¨ ê°„ì˜ ì „í™˜ ì‹œì—ë„ ê°ì²´ê°€ ìœ ì§€ë©ë‹ˆë‹¤.

- ì „ì—­ ë°ì´í„° ê´€ë¦¬
    - ê²Œì„ ì „ë°˜ì— ê±¸ì³ ìœ ì§€ë˜ì–´ì•¼ í•˜ëŠ” ë°ì´í„°ë¥¼ ì €ì¥ 
    - í”Œë ˆì´ì–´ì˜ í”„ë¡œí•„, ë ˆë²¨ ê°„ì— ê³µìœ ë˜ì–´ì•¼ í•  ë°ì´í„° ë“±

- ê²Œì„ ì„¸ì…˜ ê´€ë¦¬
    - ë©€í‹°í”Œë ˆì´ì–´ ì„¸ì…˜ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœë¥¼ ê´€ë¦¬
    
- ì´ˆê¸°í™” ë° ì¢…ë£Œ
    - ê²Œì„ ì‹œì‘ ì‹œ ì´ˆê¸°í™”ë˜ê³ , ì¢…ë£Œ ì‹œ í´ë¦°ì—… ì‘ì—…ì„ ìˆ˜í–‰

ì¼ë°˜ì ì¸ í”„ë¡œì íŠ¸ì—ì„œëŠ” GameInstanceë¥¼ ìƒì†ë°›ëŠ” í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë°ì´í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. [í”„ë¡œì íŠ¸ ì„¸íŒ…] - [ë§µ & ëª¨ë“œ] - [ê²Œì„ ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤] ì—ì„œ ìì‹ ì˜ GameInstanceë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ìƒì„±ìì™€ Init
GameInstanceì˜ Init í•¨ìˆ˜ëŠ” ê²Œì„ì´ ì‹œì‘ë˜ê³  ê°€ì¥ ë¨¼ì € í˜¸ì¶œë©ë‹ˆë‹¤. ë¬¼ë¡  Init í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ê¸° ì „ì—ëŠ” ìƒì„±ìê°€ ë¨¼ì € í˜¸ì¶œëœë‹¤ëŠ” ì ì„ ìœ ì˜í•©ì‹œë‹¤.

```c++
// .h
UCLASS()
class PUZZELPLATFORM_API UPuzzlePlatformGameInstance : public UGameInstance
{
	GENERATED_BODY()

public:
	UPuzzlePlatformGameInstance(const FObjectInitializer& ObjectInitializer);

protected:
	virtual void Init() override;
```

```c++
// .cpp
#include "PuzzlePlatformGameInstance.h"

UPuzzlePlatformGameInstance::UPuzzlePlatformGameInstance(const FObjectInitializer& ObjectInitializer)
{
	UE_LOG(LogTemp, Warning, TEXT("UPuzzlePlatformGameInstance::Constructor"));
}

void UPuzzlePlatformGameInstance::Init()
{
	Super::Init();
	
	UE_LOG(LogTemp, Warning, TEXT("UPuzzlePlatformGameInstance::Init"));
}
```

![image](https://github.com/user-attachments/assets/da7e0bb0-302f-4f55-b31d-43731440f3ef)

GameInstanceëŠ” ìœ ì €ë§ˆë‹¤ í˜¸ì¶œë©ë‹ˆë‹¤.
{: .notice--info}

### ì½˜ì†” ëª…ë ¹
ì–¸ë¦¬ì–¼ì—ì„œëŠ” ê²Œì„ì„ í”Œë ˆì´ ì¤‘ì— íŠ¹ì • ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ë°©ë²•ì€ í”Œë ˆì´ ì¤‘ ESCí‚¤ ì•„ë˜ì— ìˆëŠ” `í‚¤ë¥¼ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤. 

ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ ì—­ì‹œ ì½˜ì†” ëª…ë ¹ìœ¼ë¡œ í˜¸ì¶œì´ ê°€ëŠ¥í•œë°, ì´ëŠ” `UFUNCTION(Exec)`ë¥¼ ì´ìš©í•´ ì •ì˜ëœ í•¨ìˆ˜ë§Œì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

```c++
// UPuzzlePlatformGameInstance.h

// ...

private:
	UFUNCTION(Exec)
	void Host();

	UFUNCTION(Exec)
	void Join(const FString& addr);
```

```c++
// UPuzzlePlatformGameInstance.cpp

// ...

void UPuzzlePlatformGameInstance::Host()
{
	UE_LOG(LogTemp, Warning, TEXT("UPuzzlePlatformGameInstance::Host"));
	GEngine->AddOnScreenDebugMessage(-1, 1000.f, FColor::Red, TEXT("UPuzzlePlatformGameInstance::Host"));
}

void UPuzzlePlatformGameInstance::Join(const FString& addr)
{
	UE_LOG(LogTemp, Warning, TEXT("UPuzzlePlatformGameInstance::Join, %s"), *addr);
	GEngine->AddOnScreenDebugMessage(-1, 1000.f, FColor::Red, FString::Printf(TEXT("UPuzzlePlatformGameInstance::Join, %s"), *addr));
}
```

![image](https://github.com/user-attachments/assets/541d7797-9ff7-478c-822b-36802f121061)
ì‚¬ìš©ì ì •ì˜ í•¨ìˆ˜ê°€ ì°½ì— ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

Exec í˜¸í™˜ í´ë˜ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
- PlayerControllers
- PossessedPawns
- HUDs
- Cheat Managers
- Game Modes
- Game Instances

## ServerTravel
`ServerTravel`ì€ ì„œë²„ ì „ìš© ê¸°ëŠ¥ìœ¼ë¡œ, <u>ì„œë²„ë¥¼ ìƒˆë¡œìš´ ì›”ë“œ / ë ˆë²¨ë¡œ ì´ë™ì‹œí‚¤ëŠ” ì—­í• </u>ì„ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ <u>ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ë“¤ ì—­ì‹œ ê°•ì œë¡œ ì´ë™</u>í•˜ê²Œ ë©ë‹ˆë‹¤.

```c++
void UPuzzlePlatformGameInstance::Host()
{
	// ...

	// ServerTravelì˜ ì²« ë²ˆì§¸ ì¸ìì—ëŠ” fstring íƒ€ì…ì˜ urlì„ ì…ë ¥í•´ì¤˜ì•¼ í•œë‹¤.
	// cmdì—ì„œ ipì£¼ì†Œ ëŒ€ì‹  ë§µì˜ ê²½ë¡œ ê°’ì„ ì…ë ¥í•´ë„ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ì—¬ê¸°ì„œë„ ë§µ ê²½ë¡œë¥¼ ì…ë ¥í•˜ë©´
	// í•´ë‹¹ ë§µìœ¼ë¡œ ì´ë™í•œë‹¤.
	GetWorld()->ServerTravel("/Game/ThirdPerson/Maps/ThirdPersonMap?listen");
}
```

## ClientTravel
ìœ„ì—ì„œ ì–¸ê¸‰í•œ ê²ƒì²˜ëŸ¼ ServerTravel í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ì„œë²„ì— ì—°ê²°ëœ ëª¨ë“  ìœ ì €ë“¤ì´ í•œë²ˆì— ì´ë™í•˜ê²Œ ë©ë‹ˆë‹¤. `ClientTravel`ì„ ì´ìš©í•˜ë©´ í•´ë‹¹ í•¨ìˆ˜ë¥´ í˜¸ì¶œí•œ í”Œë ˆì´ì–´ë§Œ íŠ¹ì • ë§µìœ¼ë¡œ ì´ë™ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```c++
void UPuzzlePlatformGameInstance::Join(const FString& addr)
{
	// ...

	// ClientTravelì€ PlayerControllerì—ì„œ í˜¸ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.
	// GameInstanceì—ì„œëŠ” GetFirstLocalPlayerControllerë¥¼ ì´ìš©í•´ PlayerControllerë¥¼ ì–»ì–´ì˜¬ ìˆ˜ ìˆë‹¤.
	APlayerController* playerController = GetFirstLocalPlayerController();

	// ì½˜ì†” ì°½ì—ì„œ Join {ipì£¼ì†Œ}ë¥¼ ì…ë ¥í•˜ë©´ í˜¸ìŠ¤íŠ¸ì˜ ë§µìœ¼ë¡œ ì´ë™ëœë‹¤.
	if(IsValid(playerController))
		playerController->ClientTravel(addr, TRAVEL_Absolute);

}
```