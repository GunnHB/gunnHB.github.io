---
title:  "[Unreal Lecture 001] Section001::ν”λ μ΄μ–΄ μ—°κ²°ν•κΈ° 002"
excerpt: ""

author: gunnHB
categories: 
 - UnrealLecture
tags: 
 - [Github, Git, Unreal, Programming, UnrealLecture, C++]

toc: true
toc_sticky: true
 
date: 2024-09-23
last_modified_at: 2024-09-24
---

π”” μ λ°λ―Έ [μ–Έλ¦¬μ–Ό C++ λ©€ν‹°ν”λ μ΄μ–΄ λ§μ¤ν„° : μ¤‘κΈ‰ κ²μ„ κ°λ°](https://www.udemy.com/course/best-unreal-c/?couponCode=ST22MT92324B)μ„ μ •λ¦¬ν• λ‚΄μ©μ…λ‹λ‹¤. π””
{: .notice}

## μ›€μ§μ΄λ” ν”λ«νΌ λ§λ“¤κΈ°
ν”„λ΅μ νΈμ— μ›€μ§μ΄λ” ν”λ«νΌμ„ ν•λ‚ μ¶”κ°€ν•΄λ΄…μ‹λ‹¤. μ΄λ” `StaticMeshActor`λ¥Ό μ΄μ©ν•΄ μ¶”κ°€ν•  μ μμµλ‹λ‹¤. μ΄λ” C++ν΄λμ¤ μ¶”κ°€ μ°½μ λ¨λ“  ν΄λμ¤μ—μ„ κ²€μƒ‰μ„ ν†µν•΄ μ¶”κ°€ν•  μ μμµλ‹λ‹¤.

μ΄λ™ν•λ” ν”λ«νΌμ΄κΈ° λ•λ¬Έμ— ν•΄λ‹Ή `Tick`ν•¨μλ¥Ό μ΄μ©ν•΄ μ΄λ™μ„ κµ¬ν„ν•λ©΄ λ©λ‹λ‹¤.

```c++
// .h

UCLASS()
class PUZZELPLATFORM_API AMovingPlatform : public AStaticMeshActor
{
	GENERATED_BODY()

public:
	AMovingPlatform();
	
protected:
    virtual void Tick(float DeltaSeconds) override;
};
```

```c++
// .cpp

AMovingPlatform::AMovingPlatform()
{
	// Tickμ„ ν™μ„±ν™”
	PrimaryActorTick.bCanEverTick = true;

	// λ§¤μ‹ μ—μ…‹ κ°€μ Έμ¤κΈ°
	static ConstructorHelpers::FObjectFinder<UStaticMesh> mesh(TEXT("/Script/Engine.StaticMesh'/Engine/EngineMeshes/Cube.Cube'"));

	// λ©”μ‹ μ„Έν…
	if(mesh.Succeeded())
		GetStaticMeshComponent()->SetStaticMesh(mesh.Object);

	// ν¬κΈ° μ„Έν…
	GetStaticMeshComponent()->SetRelativeScale3D(FVector(.7f, .7f, .1f));

	// λ¬΄λ²„λ¥Όλ΅ μ„¤μ •ν•΄μ£Όμ§€ μ•μΌλ©΄ μ—λ¬κ°€ μ¶λ ¥
	SetMobility(EComponentMobility::Movable);
}

void AMovingPlatform::Tick(float DeltaSeconds)
{
	Super::Tick(DeltaSeconds);

	FVector location = GetActorLocation();
	// μ΄λ‹Ή 5cmμ”© μ΄λ™μ‹ν‚¤κΈ° μ„ν•΄
	location += FVector(5.f * DeltaSeconds, 0.f, 0.f);
	SetActorLocation(location);
}
```

AMovingPlatform ν•¨μμ—μ„ SetMobility ν•¨μλ¥Ό νΈμ¶ν•λ”λ°, μ΄λ” ν”λ μ΄ μ¤‘ μ•΅ν„°κ°€ μ–΄λ–¤ λ°©μ‹μΌλ΅ μ΄λ™ λλ” λ³€ν™”ν•  μ μλ„λ΅ ν• μ§€ μ μ–΄ν•λ” μ„Έν…μ…λ‹λ‹¤.

- Static
	- ν”λ μ΄ λ„μ¤‘ μ–΄λ–¤ μ‹μΌλ΅λ“  μ΄λ™ λλ” λ³€ν™”ν•  μ μ—†λ” μ•΅ν„°
- Stationary
	- ν”λ μ΄ λ„μ¤‘ μ΄λ™ν•μ§€λ” λ»ν•μ§€λ§ λ³€ν•  μλ” μλ” μ•΅ν„°
- Movable
	- ν”λ μ΄ λ„μ¤‘ μ¶”κ°€, μ κ±°, μ΄λ™ν•΄μ•Ό ν•λ” μ•΅ν„°

μ»΄νμΌ ν›„ μ λ‹Ήν• μ„μΉμ— λ°°μΉν•κ³  ν”λ μ΄λ¥Ό ν•΄λ³΄λ©΄ κµ‰μ¥ν μ²μ²ν Xμ¶•μΌλ΅ μ΄λ™ν•λ” νλΈλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

![2024-09-24142326-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/bf2ad774-91ef-4407-a8e1-984903251aa4){: .align-center}
μ λ³΄λ©΄ μ›€μ§μ…λ‹λ‹¤.π…


## ν΄λΌμ΄μ–ΈνΈ? μ„λ²„?
κ·Έλ°λ° μ°λ¦¬κ°€ ν”λ μ΄ν•λ” ν™κ²½μ΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ¤‘ λ¬΄μ—‡μΌκΉμ”? λ°λ””μΌ€μ΄ν‹°λ“ μ„λ²„μ κ²½μ° μ „μ© μ„λ²„κ°€ μ΅΄μ¬ν•μ§€ μ•κΈ° λ•λ¬Έμ— λ„κ°€ μ„λ²„μ΄κ³  λ„κ°€ ν΄λΌμ΄μ–ΈνΈμΈμ§€ ν™•μΈν•κΈ° μ–΄λ µμµλ‹λ‹¤.

μ°μ„  μ‘μ„±ν• μ½”λ“λ” μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ μ‚¬μ©ν•λ‹¤λ” μ μ„ μ•μ•„μ•Όν•©λ‹λ‹¤. λ„κµ°κ°€ μ„λ²„μ μ—­ν• μ„ ν•λ‹¤λ©΄ ν•΄λ‹Ή μ„λ²„μ— λ‹¤λ¥Έ μ μ €κ°€ μ ‘μ†ν•λ” ν•νƒμΈ κ²ƒμ…λ‹λ‹¤.

μ΄λ¥Ό κµ¬λ¶„ν•κΈ° μ„ν•΄ μ–Έλ¦¬μ–Όμ—μ„λ” `HasAuthority()` ν•¨μλ¥Ό μ κ³µν•΄μ¤λ‹λ‹¤. μ΄λ” ν•΄λ‹Ή <u>μ μ €κ°€ μ„λ²„λΌλ©΄ true</u>λ¥Ό <u>ν΄λΌμ΄μ–ΈνΈλΌλ©΄ false</u>λ¥Ό λ°ν™ν•λ” ν•¨μμ…λ‹λ‹¤.

μ΄λ¥Ό μ΄μ©ν•΄ μ„ μ½”λ“λ¥Ό μ΅°κΈ μμ •ν•΄λ³΄λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

```c++
// .cpp

void AMovingPlatform::Tick(float DeltaSeconds)
{
	Super::Tick(DeltaSeconds);

	// μ£Όμ²΄κ°€ μ„λ²„μΈμ§€
	if(HasAuthority())
	{
		FVector location = GetActorLocation();
		// μ΄λ‹Ή 5cmμ”© μ΄λ™μ‹ν‚¤κΈ° μ„ν•΄
		location += FVector(5.f * DeltaSeconds, 0.f, 0.f);
		SetActorLocation(location);
	}
}
```

HasAuthority() ν•¨μλ” Actorμ— μ„μΉν•΄ μμµλ‹λ‹¤.
{: .notice--info}

μ΄λ ‡κ² ν•΄μ„ ν”λ μ΄λ¥Ό ν•΄λ³΄λ©΄ μ„λ²„μΈ μ μ €μ ν™”λ©΄μ—μ„λ” νλΈκ°€ μ›€μ§μ΄μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μ μ €μ ν™”λ©΄μ—μ„λ” μ›€μ§μ΄μ§€ μ•λ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

![2024-09-24144703-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/11ee08be-33ca-4ef9-a258-81c8e89bf5b4){: .align-center}
μ„λ²„μ—μ„λ” μ΄λ™ μ¤‘μ…λ‹λ‹¤.π…

## Replication
λ§μ•½ ν΄λΌμ΄μ–ΈνΈ μ μ €κ°€ ν•΄λ‹Ή νλΈλ¥Ό λ°κ³  μ¬λΌμ„λ ¤κ³  ν•λ©΄ νλΈλ¥Ό λ«κ³  λ°”λ‹¥μΌλ΅ λ–¨μ–΄μ§€κ² λ©λ‹λ‹¤. μ΄λ” μ„λ²„μ—μ„λ” νλΈκ°€ μ΄λ™ν•μ—¬ ν•΄λ‹Ή μ„μΉμ— μ΅΄μ¬ν•μ§€ μ•κΈ° λ•λ¬Έμ…λ‹λ‹¤.

`Replication`μ€ λ³µμ λΌλ” λ»μΌλ΅ <u>μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈμ μƒνƒλ¥Ό μƒν•­ μµμ‹ μΌλ΅ μ μ§€μ‹ν‚¤λ” μ”μ†</u>μ…λ‹λ‹¤.
Replicateλ΅ μ„ μ–Έλ λ³€μλ” μ„λ²„μ—μ„ κ°’μ΄ λ³€κ²½λλ©΄ μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈλ“¤μ—κ² μ΄λ¥Ό μ „λ‹¬ν•΄ ν΄λΌμ΄μ–ΈνΈμ—μ„λ„ κ°’μ΄ μμ •λλ„λ΅ ν•©λ‹λ‹¤.

μ΄λ¥Ό μ½”λ“μ— μ μ©μ‹ν‚¤λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

```c++
// .h
UCLASS()
class PUZZELPLATFORM_API AMovingPlatform : public AStaticMeshActor
{
	// ...
protected:
	virtual void BeginPlay() override;
};

// .cpp
void AMovingPlatform::BeginPlay()
{
	Super::BeginPlay();

	// λ³µμ μ κ¶ν•μ€ μ„λ²„μ—κ² μλ‹¤.
	if(HasAuthority())
	{
		SetReplicates(true);				// ν΄λΌμ΄μ–ΈνΈμ— ν•΄λ‹Ή μ•΅ν„°μ λ³µμ  μ—¬λ¶€λ¥Ό μ„Έν…
		SetReplicateMovement(true);			// ν΄λΌμ΄μ–ΈνΈμ— μ΄λ™ κ΄€λ ¨ μ”μ†μ λ³µμ  μ—¬λ¶€λ¥Ό μ„Έν…
	}
}
```

μ»΄νμΌ ν›„ μ‹¤ν–‰ν•΄λ³΄λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ νλΈμ μ΄λ™μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

![2024-09-24163810-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/20a03bc8-9230-47b8-9fbc-f48fe42e6baf)

### What if...?
λ§μ•½ Tick ν•¨μμ λ‚΄μ©μ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ μν–‰ν•λ‹¤λ©΄ μ–΄λ–»κ² λ κΉμ”? μ΄λ” <u>ν΄λΌμ΄μ–ΈνΈμ νλΈλ§ μ΄λ™</u>ν•κ² λ©λ‹λ‹¤. ν•μ§€λ§ νλΈμ μƒνƒ μ •λ³΄λ” μ„λ²„μ— μλ” κ²ƒμ΄ μ³μ€ κ²ƒμ΄κΈ° λ•λ¬Έμ—
μ‹¤μ  νλΈλ” λ©μ¶° μκ² λ©λ‹λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈ μ μ €κ°€ μ΄λ™ν•λ” νλΈμ— μ¬λΌνƒ€λ” κ²ƒμ΄ λ¶κ°€λ¥ν•λ©°, νλΈμ μ›λ μ„μΉλ΅ μ΄λ™ν•λ ¤κ³  ν•΄λ„ ν¬λ…ν• λ²½μ— λ§‰ν€ λ‚μ•„κ° μ μ—†κ² λ©λ‹λ‹¤.

```c++
// .cpp

void AMovingPlatform::Tick(float DeltaSeconds)
{
	Super::Tick(DeltaSeconds);

	// ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ νΈμ¶
	if(!HasAuthority())
	{
		/// ...
	}
}
```

![image](https://github.com/user-attachments/assets/a9eb86d5-e2ee-4eaa-b311-c2110e5ef6e1)
μ›λ μ„μΉμ νλΈ μ„μ— μ¬λΌκ°€λ‹ μ μ €μ μ„μΉκ°€ μ„λ΅ λ‹¤λ¥΄κ² λ‚νƒ€λ‚©λ‹λ‹¤.

## λ§λ¬΄λ¦¬
μ΄λ² ν¬μ¤ν…μ—μ„λ” MovingPlatformμ μƒμ„±κ³Ό Tick ν•¨μλ¥Ό μ΄μ©ν• μ•΅ν„°μ μ΄λ™, HasAuthority ν•¨μμ μ—­ν• , Replicateμ— λ€ν•΄ μ•μ•„λ³΄μ•μµλ‹λ‹¤.π